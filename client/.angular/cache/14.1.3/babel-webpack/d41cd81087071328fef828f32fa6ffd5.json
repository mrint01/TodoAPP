{"ast":null,"code":"import { AbstractControl, ValidationErrors } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction ProfileComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.error_msg, \" \");\n  }\n}\n\nfunction ProfileComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.success_msg, \" \");\n  }\n}\n\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    constructor(authService, _router) {\n      this.authService = authService;\n      this._router = _router;\n      this.user = JSON.parse(localStorage.getItem('user') || '{}');\n      this.name = \"\";\n      this.email = \"\";\n      this.password = \"\";\n      this.password2 = \"\";\n      this.error_msg = \"\";\n      this.success_msg = \"\";\n      this.nameold = \"\";\n      this.emailold = \"\";\n    }\n\n    static matchValues(matchTo // name of the control to match to\n    ) {\n      return control => {\n        return !!control.parent && !!control.parent.value && control.value === control.parent.controls[matchTo].value ? null : {\n          isMatching: false\n        };\n      };\n    }\n\n    ngOnInit() {\n      this.authService.profile(this.user).subscribe(users => {\n        this.nameold = users[\"name\"];\n        this.emailold = users[\"email\"];\n      });\n    }\n\n    updateProfile() {\n      if (this.password !== \"\") {\n        if (this.password != this.password2) {\n          this.error_msg = \"passwords does not match\";\n        } else {\n          const update_user = {\n            name: this.name,\n            email: this.email,\n            password: this.password,\n            user: this.user\n          };\n          this.authService.update_profile(update_user).subscribe(data => {\n            if (data['error']) {\n              this.error_msg = data['error'];\n            }\n\n            if (data['message']) {\n              this.success_msg = data['message'];\n              this.ngOnInit();\n            }\n          });\n        }\n      } else {\n        const update_user = {\n          name: this.name,\n          email: this.email,\n          user: this.user\n        };\n        console.log(update_user);\n        this.authService.update_profile(update_user).subscribe(data => {\n          console.log(data);\n\n          if (data['error']) {\n            this.error_msg = data['error'];\n          }\n\n          if (data['message']) {\n            this.success_msg = data['message'];\n            this.ngOnInit();\n          }\n        });\n      }\n    }\n\n  }\n\n  ProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n    return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  ProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileComponent,\n    selectors: [[\"app-profile\"]],\n    decls: 46,\n    vars: 11,\n    consts: [[1, \"vh-100\", \"gradient-custom\"], [\"name\", \"f2\", 3, \"ngSubmit\"], [1, \"container\", \"py-5\", \"h-100\"], [1, \"container\", \"rounded\", \"bg-white\", \"mt-5\", \"mb-5\"], [2, \"margin-left\", \"15px\"], [\"routerLink\", \"/todos\"], [\"src\", \"../../../assets/img/arrow.svg\", 2, \"width\", \"30px\", \"margin-top\", \"10px\"], [1, \"row\"], [1, \"col-md-3\", \"border-right\"], [1, \"d-flex\", \"flex-column\", \"align-items-center\", \"text-center\", \"p-3\", \"py-5\"], [1, \"rounded-circle\", \"mt-5\", 2, \"width\", \"100px\", \"height\", \"100px\", 3, \"src\"], [1, \"font-weight-bold\"], [1, \"text-black-50\"], [1, \"col-md-5\", \"border-right\"], [1, \"p-3\", \"py-5\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\"], [1, \"text-right\"], [1, \"row\", \"mt-2\"], [1, \"col-md-6\"], [1, \"labels\"], [\"name\", \"name\", \"type\", \"text\", \"value\", \"\", 1, \"form-control\", 3, \"ngModel\", \"placeholder\", \"ngModelChange\"], [\"name\", \"email\", \"type\", \"email\", \"value\", \"\", 1, \"form-control\", 3, \"ngModel\", \"placeholder\", \"ngModelChange\"], [1, \"row\", \"mt-3\"], [1, \"col-md-12\"], [\"name\", \"password\", \"type\", \"password\", \"placeholder\", \"Password\", \"value\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"password2\", \"type\", \"password\", \"placeholder\", \"Confirm Password\", \"value\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [1, \"mt-5\", \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"profile-button\"], [1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-success\"]],\n    template: function ProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function ProfileComponent_Template_form_ngSubmit_1_listener() {\n          return ctx.updateProfile();\n        });\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"span\")(6, \"a\", 5);\n        i0.ɵɵelement(7, \"img\", 6);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"div\", 8)(10, \"div\", 9);\n        i0.ɵɵelement(11, \"img\", 10);\n        i0.ɵɵelementStart(12, \"span\", 11);\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"span\", 12);\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"span\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 13)(18, \"div\", 14)(19, \"div\", 15)(20, \"h4\", 16);\n        i0.ɵɵtext(21, \"Profile Settings\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 17)(23, \"div\", 18)(24, \"label\", 19);\n        i0.ɵɵtext(25, \"Full Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"input\", 20);\n        i0.ɵɵlistener(\"ngModelChange\", function ProfileComponent_Template_input_ngModelChange_26_listener($event) {\n          return ctx.name = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(27, \"div\", 18)(28, \"label\", 19);\n        i0.ɵɵtext(29, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"input\", 21);\n        i0.ɵɵlistener(\"ngModelChange\", function ProfileComponent_Template_input_ngModelChange_30_listener($event) {\n          return ctx.email = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(31, \"div\", 22)(32, \"div\", 23)(33, \"label\", 19);\n        i0.ɵɵtext(34, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"input\", 24);\n        i0.ɵɵlistener(\"ngModelChange\", function ProfileComponent_Template_input_ngModelChange_35_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(36, \"div\", 23)(37, \"label\", 19);\n        i0.ɵɵtext(38, \"Confirm Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"input\", 25);\n        i0.ɵɵlistener(\"ngModelChange\", function ProfileComponent_Template_input_ngModelChange_39_listener($event) {\n          return ctx.password2 = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(40, \"br\");\n        i0.ɵɵtemplate(41, ProfileComponent_div_41_Template, 2, 1, \"div\", 26);\n        i0.ɵɵtemplate(42, ProfileComponent_div_42_Template, 2, 1, \"div\", 27);\n        i0.ɵɵelementStart(43, \"div\", 28)(44, \"button\", 29);\n        i0.ɵɵtext(45, \"Save Profile\");\n        i0.ɵɵelementEnd()()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.user.user.Avatar, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.nameold, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.emailold, \" \");\n        i0.ɵɵadvance(11);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.nameold);\n        i0.ɵɵproperty(\"ngModel\", ctx.name);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.emailold);\n        i0.ɵɵproperty(\"ngModel\", ctx.email);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.password2);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.error_msg.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.success_msg.length > 0);\n      }\n    },\n    dependencies: [i3.NgIf, i2.RouterLinkWithHref, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm],\n    styles: [\".gradient-custom[_ngcontent-%COMP%]{background:radial-gradient(50% 123.47% at 50% 50%,#00ff94 0%,#720059 100%),linear-gradient(121.28deg,#669600 0%,#ff0000 100%),linear-gradient(360deg,#0029ff 0%,#8fff00 100%),radial-gradient(100% 164.72% at 100% 100%,#6100ff 0%,#00ff57 100%),radial-gradient(100% 148.07% at 0% 0%,#fff500 0%,#51d500 100%);background-blend-mode:screen,color-dodge,overlay,difference,normal}\"]\n  });\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}